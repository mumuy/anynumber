/*!
 * anynumber v1.0.2
 * big number parser tool.
 * https://passer-by.com/anynumber/
 *
 * Copyright (c) 2024-present, HaoLe Zheng
 *
 * Released under the MIT License
 * https://github.com/mumuy/anynumber
 *
 * Created on: 2025-07-18
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).AnyNumber=e()}(this,(function(){"use strict";function t(t){var e=i(t).replace(/^-/,""),n=0==i(t).indexOf("-"),r=e.length,u=e.indexOf("."),o=u>-1?r-u-1:0;return e=e.replace(".",""),{value:BigInt((n?"-":"")+e),time:BigInt("1"+new Array(o).fill("0").join(""))}}function e(i,r,u){var o=null,l=1,a=1;if("**"==r)a=(o=t(Math.pow(i,u))).time.toString().length-1,l=o.time;else{if("%"==r){var d=Math.floor(Math.abs(i)/Math.abs(u)),f=0==Math.floor(i/u).toString().indexOf("-"),h=e(Math.abs(d),"*",Math.abs(u));return(f?"-":"")+e(Math.abs(i),"-",h)}var v=function(e,n){var i=t(e),r=t(n),u=i.time*r.time;return{value1:i.value*r.time,value2:r.value*i.time,time1:r.time,time2:i.time,time:u}}(i,u);if(a=v.time.toString().length-1,"+"==r)o=t(v.value1+v.value2),l=v.time;else if("-"==r)o=t(v.value1-v.value2),l=v.time;else if("*"==r)o=t(v.value1*v.value2),l=v.time*v.time;else if("/"==r){var c=BigInt("1"+new Array(36+a).fill("0").join(""));o=t(v.value1*c/v.value2),l=c}}var s=o.value.toString().replace(/^-/,""),g=0==o.value.toString().indexOf("-"),p=new Array(36+a).fill("0").concat(s.split("")),m=p.length-(l.toString().length-1);return p.splice(m,0,"."),(g?"-":"")+(n(p.join(""),32).replace(/^0+/,"").replace(/(?<=\.\d*)0*$/,"").replace(/\.0*$/,"").replace(/^\./,"0.")||"0")}function n(t,n){n=Math.max(0,n);var i=new Array(n).fill("0").join(""),r=(t+=t.includes(".")?i:"."+i).indexOf(".")+n,u=+t.charAt(r+1);(t=t.substring(0,r+1),u>=5)&&(t=e(t,"+","0."+i.substring(1)+"1"));return t}function i(t){var n=t.toString().match(/([\+\-]?\d*\.\d*|[\+\-]?\d*)e([\+\-]?\d*\.\d*|[\+\-]?\d*)/),i=BigInt(1),r=BigInt(1);return n?(i=n[1],+n[2]>0?r="1"+new Array(+n[2]).fill("0").join(""):+n[2]<0&&(r=e("1","/",BigInt("1"+new Array(Math.abs(n[2])).fill("0").join("")))),e(i,"*",r)):t.toString()}function r(t){var n=[{exp:/\s/g,fun:function(){return""}},{exp:/([\+\-]?\d*\.\d*|[\+\-]?\d*)e([\+\-]?\d*\.\d*|[\+\-]?\d*)/g,fun:function(){return i(arguments.length<=0?void 0:arguments[0])}},{exp:/\+\(([\+\-]\d*\.\d*|[\+\-]\d)\)/g,fun:function(){return arguments.length<=1?void 0:arguments[1]}},{exp:/\-\(\-(\d*\.\d*|\d)\)/g,fun:function(){return"+"+(arguments.length<=1?void 0:arguments[1])}},{exp:/\-\(\+(\d*\.\d*|\d)\)/g,fun:function(){return"-"+(arguments.length<=1?void 0:arguments[1])}},{exp:/\((.+)\)/g,fun:function(){return r(arguments.length<=1?void 0:arguments[1])}},{exp:/(^\-\d*\.\d*|^\-\d+|\d*\.\d*|\d+)(\*\*|\*|\/|%)(\([\+\-]?\d*\.\d*|[\+\-]?\d+\))/g,fun:function(){return e(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3])}},{exp:/(^\-\d*\.\d*|^\-\d+|\d*\.\d*|\d+)(\*\*|\*|\/|%)([\+\-]?\d*\.\d*|[\+\-]?\d+)/g,fun:function(){return e(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3])}},{exp:/(^\-\d*\.\d*|^\-\d+|\d*\.\d*|\d+)([\+\-])([\+\-]?\d*\.\d*|[\+\-]?\d+)/,fun:function(){return e(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3])}}],u=function t(e){var i=e;return n.forEach((function(t){i=i.replace(t.exp,t.fun)})),i!=e?t(i):i}(t);return u}var u={value:null,init:function(t){this.value=r(t.toString())},add:function(t){return this.value=e(this.value,"+",t),this},subtract:function(t){return this.value=e(this.value,"-",t),this},multiply:function(t){return this.value=e(this.value,"*",t),this},divide:function(t,i){return this.value=e(this.value,"/",t),i?n(this.value,i):this},mod:function(t){return this.value=e(this.value,"%",t),this},sqrt:function(){return this.value=Math.sqrt(this.toNumber()).toString(),this},pow:function(t){return this.value=Math.pow(this.toNumber(),t).toString(),this},toFormat:function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return function(t){var n=new RegExp("([\\d,]+\\.?(\\d{0,"+e+"})?).*"),i=t.replace(/[^\d\.]/g,"").replace(/^[^\d]/,"").replace(n,"$1").replace(/\.$/,""),r=(+i).toFixed(e),u="";return i&&((t=r.split(".")[0])&&(t=t.replace(/\d(?=(?:\d{3})+\b)/g,"$&,")),u=i.replace(/(\d)*(\.\d*)?/,t+"$2")),u}(t)}(this.value,t)},toExponential:function(t){return this.toNumber().toExponential(t)},toFixed:function(t){return n(this.value,t)},toString:function(){return this.value},toNumber:function(){return+this.value}},o=function t(e){return new t.prototype.init(e)};return o.prototype=u,u.init.prototype=u,o}));
